<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" id="Definitions_15gd11y" targetNamespace="http://bpmn.io/schema/bpmn" exporter="bpmn-js (https://demo.bpmn.io)" exporterVersion="18.6.1">
  <bpmn:collaboration id="Collaboration_0s7tdcp">
    <bpmn:participant id="Participant_1q1kh33" name="Usuário" processRef="Process_1r7lpt2" />
    <bpmn:participant id="Participant_1dim9ll" name="Sistema" processRef="Process_1tthcpk" />
    <bpmn:participant id="Participant_0f4e2a8" name="Banco de Dados" processRef="Process_14e1kvy" />
    <bpmn:participant id="Participant_0n1977e" name="Usuário" processRef="Process_068un3k" />
    <bpmn:participant id="Participant_1bfjqye" name="Sistema" processRef="Process_0q0xueo" />
    <bpmn:participant id="Participant_1cws2sg" processRef="Process_1i024mk" />
    <bpmn:messageFlow id="Flow_04n5bpm" sourceRef="Activity_1v1zg7k" targetRef="Event_1lp7jnd" />
    <bpmn:messageFlow id="Flow_0wxzwuf" sourceRef="Activity_1qva7sc" targetRef="Activity_0o8524o" />
  </bpmn:collaboration>
  <bpmn:process id="Process_1r7lpt2" isExecutable="false">
    <bpmn:startEvent id="Event_1lp7jnd" name="Gerar QR Code" />
  </bpmn:process>
  <bpmn:process id="Process_1tthcpk">
    <bpmn:task id="Activity_1v1zg7k" name="Chamar API Assas">
      <bpmn:outgoing>Flow_1ku9iw7</bpmn:outgoing>
    </bpmn:task>
    <bpmn:task id="Activity_08046ks" name="Aguardar notificação de pagamento (webhook)">
      <bpmn:incoming>Flow_1ku9iw7</bpmn:incoming>
      <bpmn:outgoing>Flow_172uq2r</bpmn:outgoing>
    </bpmn:task>
    <bpmn:task id="Activity_0hxbbkn" name="Atualizar o saldo">
      <bpmn:incoming>Flow_172uq2r</bpmn:incoming>
      <bpmn:dataOutputAssociation id="DataOutputAssociation_1fmfkq1">
        <bpmn:targetRef>DataStoreReference_0uvd5e9</bpmn:targetRef>
      </bpmn:dataOutputAssociation>
    </bpmn:task>
    <bpmn:sequenceFlow id="Flow_1ku9iw7" sourceRef="Activity_1v1zg7k" targetRef="Activity_08046ks" />
    <bpmn:sequenceFlow id="Flow_172uq2r" sourceRef="Activity_08046ks" targetRef="Activity_0hxbbkn" />
  </bpmn:process>
  <bpmn:process id="Process_14e1kvy">
    <bpmn:dataStoreReference id="DataStoreReference_0uvd5e9" name="Saldo Atualizado" />
  </bpmn:process>
  <bpmn:process id="Process_068un3k">
    <bpmn:startEvent id="Event_0j4p1j5" name="Solicitar Transferencia">
      <bpmn:outgoing>Flow_1jf43f1</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:task id="Activity_1qva7sc" name="Informar e confirmar valor">
      <bpmn:incoming>Flow_1jf43f1</bpmn:incoming>
    </bpmn:task>
    <bpmn:sequenceFlow id="Flow_1jf43f1" sourceRef="Event_0j4p1j5" targetRef="Activity_1qva7sc" />
  </bpmn:process>
  <bpmn:process id="Process_0q0xueo">
    <bpmn:exclusiveGateway id="Gateway_1ldc12n" name="Saldo é suficiente?">
      <bpmn:incoming>Flow_1qocsb1</bpmn:incoming>
      <bpmn:outgoing>Flow_06nzm62</bpmn:outgoing>
      <bpmn:outgoing>Flow_0tf2fl3</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:task id="Activity_10nbzyx" name="Calcular retenção de 7%">
      <bpmn:incoming>Flow_06nzm62</bpmn:incoming>
      <bpmn:outgoing>Flow_13zopyl</bpmn:outgoing>
    </bpmn:task>
    <bpmn:task id="Activity_0o8524o" name="Consultar Saldo no Banco de Dados">
      <bpmn:outgoing>Flow_1qocsb1</bpmn:outgoing>
      <bpmn:dataOutputAssociation id="DataOutputAssociation_1pgonu9">
        <bpmn:targetRef>DataStoreReference_0r21g6k</bpmn:targetRef>
      </bpmn:dataOutputAssociation>
    </bpmn:task>
    <bpmn:exclusiveGateway id="Gateway_1pzj4e5" name="Transferência realizada?">
      <bpmn:incoming>Flow_13zopyl</bpmn:incoming>
      <bpmn:outgoing>Flow_1fk5v2v</bpmn:outgoing>
      <bpmn:outgoing>Flow_0vyzhst</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:endEvent id="Event_0ajsx32" name="Transferência Cancelada">
      <bpmn:incoming>Flow_1fk5v2v</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:task id="Activity_17xf08e" name="Registrar Transação de Saída no Banco de Dados">
      <bpmn:incoming>Flow_0vyzhst</bpmn:incoming>
      <bpmn:dataOutputAssociation id="DataOutputAssociation_067jl28">
        <bpmn:targetRef>DataStoreReference_0r21g6k</bpmn:targetRef>
      </bpmn:dataOutputAssociation>
    </bpmn:task>
    <bpmn:endEvent id="Event_135qm2d" name="Operação Cancelada">
      <bpmn:incoming>Flow_0tf2fl3</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_1qocsb1" sourceRef="Activity_0o8524o" targetRef="Gateway_1ldc12n" />
    <bpmn:sequenceFlow id="Flow_06nzm62" name="Sim" sourceRef="Gateway_1ldc12n" targetRef="Activity_10nbzyx" />
    <bpmn:sequenceFlow id="Flow_0tf2fl3" name="Não" sourceRef="Gateway_1ldc12n" targetRef="Event_135qm2d" />
    <bpmn:sequenceFlow id="Flow_13zopyl" sourceRef="Activity_10nbzyx" targetRef="Gateway_1pzj4e5" />
    <bpmn:sequenceFlow id="Flow_1fk5v2v" name="não" sourceRef="Gateway_1pzj4e5" targetRef="Event_0ajsx32" />
    <bpmn:sequenceFlow id="Flow_0vyzhst" name="sim" sourceRef="Gateway_1pzj4e5" targetRef="Activity_17xf08e" />
  </bpmn:process>
  <bpmn:process id="Process_1i024mk">
    <bpmn:dataStoreReference id="DataStoreReference_0r21g6k" name="Saldo" />
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Collaboration_0s7tdcp">
      <bpmndi:BPMNShape id="Participant_1q1kh33_di" bpmnElement="Participant_1q1kh33" isHorizontal="true">
        <dc:Bounds x="160" y="120" width="600" height="250" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1lp7jnd_di" bpmnElement="Event_1lp7jnd">
        <dc:Bounds x="242" y="172" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="221" y="148" width="78" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Participant_1dim9ll_di" bpmnElement="Participant_1dim9ll" isHorizontal="true">
        <dc:Bounds x="160" y="370" width="600" height="250" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1v1zg7k_di" bpmnElement="Activity_1v1zg7k">
        <dc:Bounds x="210" y="420" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_08046ks_di" bpmnElement="Activity_08046ks">
        <dc:Bounds x="360" y="420" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0hxbbkn_di" bpmnElement="Activity_0hxbbkn">
        <dc:Bounds x="510" y="420" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_1ku9iw7_di" bpmnElement="Flow_1ku9iw7">
        <di:waypoint x="310" y="460" />
        <di:waypoint x="360" y="460" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_172uq2r_di" bpmnElement="Flow_172uq2r">
        <di:waypoint x="460" y="460" />
        <di:waypoint x="510" y="460" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Participant_0f4e2a8_di" bpmnElement="Participant_0f4e2a8" isHorizontal="true">
        <dc:Bounds x="160" y="620" width="600" height="250" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="DataStoreReference_0uvd5e9_di" bpmnElement="DataStoreReference_0uvd5e9">
        <dc:Bounds x="535" y="695" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="519" y="752" width="83" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Participant_0n1977e_di" bpmnElement="Participant_0n1977e" isHorizontal="true">
        <dc:Bounds x="900" y="160" width="700" height="270" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0j4p1j5_di" bpmnElement="Event_0j4p1j5">
        <dc:Bounds x="952" y="252" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="937" y="295" width="67" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1qva7sc_di" bpmnElement="Activity_1qva7sc">
        <dc:Bounds x="1040" y="230" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_1jf43f1_di" bpmnElement="Flow_1jf43f1">
        <di:waypoint x="988" y="270" />
        <di:waypoint x="1040" y="270" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Participant_1bfjqye_di" bpmnElement="Participant_1bfjqye" isHorizontal="true">
        <dc:Bounds x="900" y="430" width="700" height="270" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1ldc12n_di" bpmnElement="Gateway_1ldc12n" isMarkerVisible="true">
        <dc:Bounds x="1085" y="485" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1083" y="447.5" width="53" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_10nbzyx_di" bpmnElement="Activity_10nbzyx">
        <dc:Bounds x="1180" y="470" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0o8524o_di" bpmnElement="Activity_0o8524o">
        <dc:Bounds x="940" y="470" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1pzj4e5_di" bpmnElement="Gateway_1pzj4e5" isMarkerVisible="true">
        <dc:Bounds x="1405" y="595" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1395" y="652" width="70" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0ajsx32_di" bpmnElement="Event_0ajsx32">
        <dc:Bounds x="1512" y="602" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1495" y="645" width="70" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_17xf08e_di" bpmnElement="Activity_17xf08e">
        <dc:Bounds x="1220" y="580" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_135qm2d_di" bpmnElement="Event_135qm2d">
        <dc:Bounds x="1072" y="602" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1064" y="645" width="53" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_1qocsb1_di" bpmnElement="Flow_1qocsb1">
        <di:waypoint x="1040" y="510" />
        <di:waypoint x="1085" y="510" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_06nzm62_di" bpmnElement="Flow_06nzm62">
        <di:waypoint x="1135" y="510" />
        <di:waypoint x="1180" y="510" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1148" y="492" width="19" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1fk5v2v_di" bpmnElement="Flow_1fk5v2v">
        <di:waypoint x="1455" y="620" />
        <di:waypoint x="1512" y="620" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1474" y="602" width="19" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0vyzhst_di" bpmnElement="Flow_0vyzhst">
        <di:waypoint x="1405" y="620" />
        <di:waypoint x="1320" y="620" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1368" y="603" width="18" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_13zopyl_di" bpmnElement="Flow_13zopyl">
        <di:waypoint x="1280" y="510" />
        <di:waypoint x="1430" y="510" />
        <di:waypoint x="1430" y="595" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0tf2fl3_di" bpmnElement="Flow_0tf2fl3">
        <di:waypoint x="1110" y="535" />
        <di:waypoint x="1110" y="569" />
        <di:waypoint x="1090" y="569" />
        <di:waypoint x="1090" y="602" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1079" y="553" width="21" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Participant_1cws2sg_di" bpmnElement="Participant_1cws2sg" isHorizontal="true">
        <dc:Bounds x="900" y="700" width="700" height="230" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="DataStoreReference_0r21g6k_di" bpmnElement="DataStoreReference_0r21g6k">
        <dc:Bounds x="965" y="745" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="976" y="802" width="29" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_04n5bpm_di" bpmnElement="Flow_04n5bpm">
        <di:waypoint x="260" y="420" />
        <di:waypoint x="260" y="208" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="DataOutputAssociation_1fmfkq1_di" bpmnElement="DataOutputAssociation_1fmfkq1">
        <di:waypoint x="560" y="500" />
        <di:waypoint x="560" y="695" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0wxzwuf_di" bpmnElement="Flow_0wxzwuf">
        <di:waypoint x="1090" y="310" />
        <di:waypoint x="1090" y="365" />
        <di:waypoint x="990" y="365" />
        <di:waypoint x="990" y="470" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="DataOutputAssociation_1pgonu9_di" bpmnElement="DataOutputAssociation_1pgonu9">
        <di:waypoint x="990" y="550" />
        <di:waypoint x="990" y="745" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="DataOutputAssociation_067jl28_di" bpmnElement="DataOutputAssociation_067jl28">
        <di:waypoint x="1270" y="660" />
        <di:waypoint x="1270" y="775" />
        <di:waypoint x="1015" y="775" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
